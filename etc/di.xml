<?xml version="1.0" encoding="UTF-8"?>
<!--
/**
 * NOTICE OF LICENSE
 *
 * This source file is subject to the MIT License
 * It is available through the world-wide-web at this URL:
 * https://tldrlegal.com/license/mit-license
 * If you are unable to obtain it through the world-wide-web, please send an email
 * to support@buckaroo.nl so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this module to newer
 * versions in the future. If you wish to customize this module for your
 * needs please contact support@buckaroo.nl for more information.
 *
 * @copyright Copyright (c) Buckaroo B.V.
 * @license   https://tldrlegal.com/license/mit-license
 */
 -->
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">
    <preference for="Magento\Payment\Gateway\Data\Order\OrderAdapter" type="Buckaroo\Magento2\Gateway\Data\Order\OrderAdapter"/>
    <preference for="Buckaroo\Magento2\Gateway\GatewayInterface" type="Buckaroo\Magento2\Gateway\Http\Bpe3"/>
    <preference for="Buckaroo\Magento2\Api\CertificateRepositoryInterface" type="Buckaroo\Magento2\Model\CertificateRepository"/>
    <preference for="Buckaroo\Magento2\Api\InvoiceRepositoryInterface" type="Buckaroo\Magento2\Model\InvoiceRepository"/>
    <preference for="Buckaroo\Magento2\Api\GiftcardRepositoryInterface" type="Buckaroo\Magento2\Model\GiftcardRepository"/>
    <preference for="Buckaroo\Magento2\Api\GroupTransactionRepositoryInterface" type="Buckaroo\Magento2\Model\GroupTransactionRepository"/>
    <preference for="Buckaroo\Magento2\Api\PushInterface" type="Buckaroo\Magento2\Model\Push"/>
    <preference for="Buckaroo\Magento2\Api\PaymentInformationManagementInterface" type="Buckaroo\Magento2\Model\PaymentInformationManagement"/>
    <preference for="Buckaroo\Magento2\Api\GuestPaymentInformationManagementInterface" type="Buckaroo\Magento2\Model\GuestPaymentInformationManagement"/>
    <preference for="Magento\Quote\Model\Cart\CartTotalRepository" type="Buckaroo\Magento2\Model\Cart\CartTotalRepository" />
    <preference for="Magento\Sales\Model\ResourceModel\Order\Handler\State" type="Buckaroo\Magento2\Model\ResourceModel\Order\Handler\State" />
    <preference for="Onestepcheckout\Iosc\Plugin\GuestSaveManager" type="Buckaroo\Magento2\Plugin\GuestSaveManager" />
    <preference for="Magento\Payment\Model\Checks\CanUseForCountry\CountryProvider" type="Buckaroo\Magento2\Model\Checks\CanUseForCountry\CountryProvider" />
    <preference for="Mageplaza\Osc\Model\CheckoutManagement" type="Buckaroo\Magento2\Plugin\CheckoutManagement" />
    <preference for="Magento\Ui\Model\Export\ConvertToCsv" type="Buckaroo\Magento2\Model\Export\ConvertToCsv" />
    <preference for="Magento\Sales\Model\Order\CreditmemoFactory" type="Buckaroo\Magento2\Model\Order\CreditmemoFactory" />

    <!-- giftcard rest api -->
    <preference for="Buckaroo\Magento2\Api\PayWithGiftcardInterface" type="Buckaroo\Magento2\Model\Giftcard\Api\Pay"/>
    <preference for="Buckaroo\Magento2\Model\Giftcard\Request\GiftcardInterface" type="Buckaroo\Magento2\Model\Giftcard\Request\Giftcard"/>
    <preference for="Buckaroo\Magento2\Api\Data\Giftcard\PayResponseSetInterface" type="Buckaroo\Magento2\Model\Giftcard\Api\PayResponse"/>

    <preference for="Buckaroo\Magento2\Api\Data\Giftcard\TransactionResponseInterface" type="Buckaroo\Magento2\Model\Giftcard\Api\TransactionResponse"/>
    <preference for="Buckaroo\Magento2\Api\Data\Giftcard\GetTransactionsResponseInterface" type="Buckaroo\Magento2\Model\Giftcard\Api\GetTransactionsResponse"/>
    <preference for="Buckaroo\Magento2\Api\Data\Giftcard\PayRequestInterface" type="Buckaroo\Magento2\Model\Giftcard\Api\PayRequest"/>
    <preference for="Buckaroo\Magento2\Api\GiftcardTransactionInterface" type="Buckaroo\Magento2\Model\Giftcard\Api\GetTransactions"/>
    <!-- end gifcard rest api -->

    <!-- paypal-express -->
    <preference for="Buckaroo\Magento2\Model\PaypalExpress\QuoteBuilderInterface" type="Buckaroo\Magento2\Model\PaypalExpress\QuoteBuilder" />

    <preference for="Buckaroo\Magento2\Api\PaypalExpressQuoteCreateInterface" type="Buckaroo\Magento2\Model\PaypalExpress\QuoteCreate" />

    <preference for="Buckaroo\Magento2\Api\Data\PaypalExpress\QuoteCreateResponseInterface" type="Buckaroo\Magento2\Model\PaypalExpress\Response\QuoteCreate" />
    <preference for="Buckaroo\Magento2\Api\Data\PaypalExpress\TotalBreakdownInterface" type="Buckaroo\Magento2\Model\PaypalExpress\Response\TotalBreakdown" />
    <preference for="Buckaroo\Magento2\Api\Data\PaypalExpress\BreakdownItemInterface" type="Buckaroo\Magento2\Model\PaypalExpress\Response\BreakdownItem" />

    <preference for="Buckaroo\Magento2\Api\Data\PaypalExpress\OrderDataItemInterface" type="Buckaroo\Magento2\Model\PaypalExpress\Request\OrderDataItem" />
    <preference for="Buckaroo\Magento2\Api\Data\PaypalExpress\ShippingAddressRequestInterface" type="Buckaroo\Magento2\Model\PaypalExpress\Request\ShippingAddress" />

    <preference for="Buckaroo\Magento2\Api\PaypalExpressOrderCreateInterface" type="Buckaroo\Magento2\Model\PaypalExpress\OrderCreate" />

    <preference for="Buckaroo\Magento2\Api\Data\PaypalExpress\OrderCreateResponseInterface" type="Buckaroo\Magento2\Model\PaypalExpress\Response\OrderCreate" />
    <!-- end paypal-express -->

    <type name="Buckaroo\Magento2\Model\Method\AbstractMethod">
        <arguments>
            <argument name="gateway" xsi:type="object">Buckaroo\Magento2\Gateway\GatewayInterface</argument>
            <argument name="transactionBuilderFactory" xsi:type="object">Buckaroo\Magento2\Gateway\Http\TransactionBuilderFactory</argument>
            <argument name="validatorFactory" xsi:type="object">Buckaroo\Magento2\Model\ValidatorFactory</argument>
            <argument name="messageManager" xsi:type="object">Magento\Framework\Message\ManagerInterface</argument>
            <argument name="helper" xsi:type="object">Buckaroo\Magento2\Helper\Data</argument>
            <argument name="request" xsi:type="object">Magento\Framework\App\RequestInterface</argument>
            <argument name="refundFieldsFactory" xsi:type="object">Buckaroo\Magento2\Model\RefundFieldsFactory</argument>
            <argument name="configProviderFactory" xsi:type="object">Buckaroo\Magento2\Model\ConfigProvider\Factory</argument>
            <argument name="configProviderMethodFactory" xsi:type="object">Buckaroo\Magento2\Model\ConfigProvider\Method\Factory</argument>
            <argument name="priceHelper" xsi:type="object">Magento\Framework\Pricing\Helper\Data</argument>
            <argument name="quoteFactory" xsi:type="object">Magento\Quote\Model\QuoteFactory</argument>
            <argument name="logger2" xsi:type="object">Buckaroo\Magento2\Logging\Log</argument>
        </arguments>
    </type>
    <type name="Magento\Checkout\Controller\Onepage\Success">
        <plugin name="buckaroo_magento2_checkout_success" type="Buckaroo\Magento2\Plugin\Onepage\Success" />
    </type>
    <type name="Buckaroo\Magento2\Model\Method\Paypal">
        <plugin name="buckaroo_magento2_paypal_sellersprotection_order" type="Buckaroo\Magento2\Model\Service\Plugin\PaypalSellersProtection\Order" />
    </type>

    <type name="Buckaroo\Magento2\Model\Method\SepaDirectDebit">
        <plugin name="buckaroo_magento2_sepadirectdebit" type="Buckaroo\Magento2\Plugin\Method\SepaDirectDebit" />
    </type>

    <type name="Magento\Sales\Api\OrderRepositoryInterface">
        <plugin name="buckaroo_magento2_add_order_extension_attributes" type="Buckaroo\Magento2\Plugin\OrderExtensionAttribute" />
    </type>

    <type name="Magento\Sales\Api\CreditmemoRepositoryInterface">
        <plugin name="buckaroo_magento2_add_creditmemo_extension_attributes" type="Buckaroo\Magento2\Plugin\CreditmemoExtensionAttribute" />
    </type>

    <type name="Magento\Sales\Model\Order">
        <plugin name="buckaroo_magento2_plugin_afterpay" type="Buckaroo\Magento2\Plugin\Method\Afterpay"/>
        <plugin name="buckaroo_magento2_plugin_afterpay2" type="Buckaroo\Magento2\Plugin\Method\Afterpay2"/>
        <plugin name="buckaroo_magento2_plugin_emandate" type="Buckaroo\Magento2\Plugin\Method\Emandate"/>
        <plugin name="buckaroo_magento2_plugin_klarna" type="Buckaroo\Magento2\Plugin\Method\Klarna"/>
        <plugin name="buckaroo_magento2_plugin_klarnakp" type="Buckaroo\Magento2\Plugin\Method\Klarnakp"/>
        <plugin name="buckaroo_magento2_plugin_klarnain" type="Buckaroo\Magento2\Plugin\Method\Klarnain"/>
    </type>

    <type name="Buckaroo\Magento2\Model\Push">
        <plugin name="buckaroo_magento2_paypal_sellersprotection_push" type="Buckaroo\Magento2\Model\Service\Plugin\PaypalSellersProtection\Push" />
        <plugin name="buckaroo_magento2_mpi_push" type="Buckaroo\Magento2\Model\Service\Plugin\Mpi\Push" />
        <arguments>
            <argument name="fileSystemDriver" xsi:type="object">Magento\Framework\Filesystem\Driver\File</argument>
        </arguments>
    </type>

    <type name="Magento\Sales\Model\Order\Payment\State\OrderCommand">
        <plugin name="buckaroo_magento2_plugin_commandInterface" type="Buckaroo\Magento2\Plugin\CommandInterface" />
    </type>

    <type name="Magento\Sales\Model\Order\Payment\State\AuthorizeCommand">
        <plugin name="buckaroo_magento2_plugin_commandInterface" type="Buckaroo\Magento2\Plugin\CommandInterface" />
    </type>

    <type name="Buckaroo\Magento2\Model\PaymentInformationManagement">
        <arguments>
            <argument name="registry" xsi:type="object">Magento\Framework\Registry</argument>
        </arguments>
    </type>

    <type name="Buckaroo\Magento2\Model\GuestPaymentInformationManagement">
        <arguments>
            <argument name="registry" xsi:type="object">Magento\Framework\Registry</argument>
        </arguments>
    </type>

    <type name="Buckaroo\Magento2\Model\ValidatorFactory">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="push" xsi:type="array">
                    <item name="type" xsi:type="string">push</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\Validator\Push</item>
                </item>
                <item name="transaction_response" xsi:type="array">
                    <item name="type" xsi:type="string">transaction_response</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\Validator\TransactionResponse</item>
                </item>
                <item name="transaction_response_status" xsi:type="array">
                    <item name="type" xsi:type="string">transaction_response_status</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\Validator\TransactionResponseStatus</item>
                </item>
                <item name="redirect_process" xsi:type="array">
                    <item name="type" xsi:type="string">redirect_return</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\Validator\RedirectProcess</item>
                </item>
                <item name="amount" xsi:type="array">
                    <item name="type" xsi:type="string">amount</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\Validator\Amount</item>
                </item>
            </argument>
        </arguments>
    </type>

    <type name="Buckaroo\Magento2\Model\Validator\TransactionResponse">
        <arguments>
            <argument name="publicKeyConfigProvider" xsi:type="object">Buckaroo\Magento2\Model\ConfigProvider\PublicKey</argument>
        </arguments>
    </type>

    <type name="Buckaroo\Magento2\Model\Validator\TransactionResponseStatus">
        <arguments>
            <argument name="helper" xsi:type="object">Buckaroo\Magento2\Helper\Data</argument>
        </arguments>
    </type>

    <type name="Buckaroo\Magento2\Model\ResourceModel\Certificate">
        <arguments>
            <argument name="dateTime" xsi:type="object">Magento\Framework\Stdlib\DateTime\DateTime</argument>
        </arguments>
    </type>

    <type name="Buckaroo\Magento2\Gateway\Http\TransactionBuilderFactory">
        <arguments>
            <argument name="transactionBuilders" xsi:type="array">
                <item name="order" xsi:type="array">
                    <item name="type" xsi:type="string">order</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Gateway\Http\TransactionBuilder\Order</item>
                </item>
                <item name="refund" xsi:type="array">
                    <item name="type" xsi:type="string">refund</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Gateway\Http\TransactionBuilder\Refund</item>
                </item>
                <item name="cancel" xsi:type="array">
                    <item name="type" xsi:type="string">cancel</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Gateway\Http\TransactionBuilder\Cancel</item>
                </item>
                <item name="datarequest" xsi:type="array">
                    <item name="type" xsi:type="string">datarequest</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Gateway\Http\TransactionBuilder\DataRequest</item>
                </item>
                <item name="idin" xsi:type="array">
                    <item name="type" xsi:type="string">idin</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Gateway\Http\TransactionBuilder\Idin</item>
                </item>
            </argument>
        </arguments>
    </type>

    <type name="Buckaroo\Magento2\Model\ConfigProvider\Method\Factory">
        <arguments>
            <argument name="configProviders" xsi:type="array">
                <item name="ideal" xsi:type="array">
                    <item name="type" xsi:type="string">ideal</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Ideal</item>
                </item>
                <item name="idealgateway" xsi:type="array">
                    <item name="type" xsi:type="string">idealgateway</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\IdealGateway</item>
                </item>
                <item name="idealprocessing" xsi:type="array">
                    <item name="type" xsi:type="string">idealprocessing</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\IdealProcessing</item>
                </item>
                <item name="creditcard" xsi:type="array">
                    <item name="type" xsi:type="string">creditcard</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Creditcard</item>
                </item>
                <item name="creditcards" xsi:type="array">
                    <item name="type" xsi:type="string">creditcards</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Creditcards</item>
                </item>
                <item name="giropay" xsi:type="array">
                    <item name="type" xsi:type="string">giropay</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Giropay</item>
                </item>
                <item name="mrcash" xsi:type="array">
                    <item name="type" xsi:type="string">mrcash</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Mrcash</item>
                </item>
                <item name="paypal" xsi:type="array">
                    <item name="type" xsi:type="string">paypal</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Paypal</item>
                </item>
                <item name="payconiq" xsi:type="array">
                    <item name="type" xsi:type="string">payconiq</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Payconiq</item>
                </item>
                <item name="sepadirectdebit" xsi:type="array">
                    <item name="type" xsi:type="string">sepadirectdebit</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\SepaDirectDebit</item>
                </item>
                <item name="sofortbanking" xsi:type="array">
                    <item name="type" xsi:type="string">sofortbanking</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Sofortbanking</item>
                </item>
                <item name="belfius" xsi:type="array">
                    <item name="type" xsi:type="string">belfius</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Belfius</item>
                </item>
                <item name="transfer" xsi:type="array">
                    <item name="type" xsi:type="string">transfer</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Transfer</item>
                </item>
                <item name="afterpay" xsi:type="array">
                    <item name="type" xsi:type="string">afterpay</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Afterpay</item>
				</item>
                <item name="afterpay2" xsi:type="array">
                    <item name="type" xsi:type="string">afterpay2</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Afterpay2</item>
				</item>
                <item name="afterpay20" xsi:type="array">
                    <item name="type" xsi:type="string">afterpay20</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Afterpay20</item>
                </item>
                <item name="billink" xsi:type="array">
                    <item name="type" xsi:type="string">billink</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Billink</item>
                </item>
                <item name="payperemail" xsi:type="array">
                    <item name="type" xsi:type="string">payperemail</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\PayPerEmail</item>
                </item>
                <item name="paylink" xsi:type="array">
                    <item name="type" xsi:type="string">paylink</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\PayLink</item>
                </item>
                <item name="eps" xsi:type="array">
                    <item name="type" xsi:type="string">eps</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Eps</item>
                </item>
                <item name="giftcards" xsi:type="array">
                    <item name="type" xsi:type="string">giftcards</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Giftcards</item>
                </item>
                <item name="kbc" xsi:type="array">
                    <item name="type" xsi:type="string">kbc</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Kbc</item>
                </item>
                <item name="klarna" xsi:type="array">
                    <item name="type" xsi:type="string">klarna</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Klarna</item>
                </item>
                <item name="klarnakp" xsi:type="array">
                    <item name="type" xsi:type="string">klarnakp</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Klarnakp</item>
                </item>
                <item name="klarnain" xsi:type="array">
                    <item name="type" xsi:type="string">klarnain</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Klarnain</item>
                </item>
                <item name="emandate" xsi:type="array">
                    <item name="type" xsi:type="string">emandate</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Emandate</item>
                </item>
                <item name="applepay" xsi:type="array">
                    <item name="type" xsi:type="string">applepay</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Applepay</item>
                </item>
                <item name="capayablein3" xsi:type="array">
                    <item name="type" xsi:type="string">capayablein3</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\CapayableIn3</item>
                </item>
                <item name="capayablepostpay" xsi:type="array">
                    <item name="type" xsi:type="string">capayablepostpay</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\CapayablePostpay</item>
                </item>
                <item name="alipay" xsi:type="array">
                    <item name="type" xsi:type="string">alipay</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Alipay</item>
                </item>
                <item name="wechatpay" xsi:type="array">
                    <item name="type" xsi:type="string">wechatpay</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Wechatpay</item>
                </item>
                <item name="p24" xsi:type="array">
                    <item name="type" xsi:type="string">p24</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\P24</item>
                </item>
                <item name="trustly" xsi:type="array">
                    <item name="type" xsi:type="string">trustly</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Trustly</item>
                </item>
                <item name="rtp" xsi:type="array">
                    <item name="type" xsi:type="string">rtp</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Rtp</item>
                </item>
                <item name="pospayment" xsi:type="array">
                    <item name="type" xsi:type="string">pospayment</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Pospayment</item>
                </item>
                <item name="tinka" xsi:type="array">
                    <item name="type" xsi:type="string">tinka</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Method\Tinka</item>
                </item>
            </argument>
        </arguments>
    </type>

    <type name="Buckaroo\Magento2\Model\ConfigProvider\Factory">
        <arguments>
            <argument name="configProviders" xsi:type="array">
                <item name="account" xsi:type="array">
                    <item name="type" xsi:type="string">account</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Account</item>
                </item>
                <item name="private_key" xsi:type="array">
                    <item name="type" xsi:type="string">private_key</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\PrivateKey</item>
                </item>
                <item name="public_key" xsi:type="array">
                    <item name="type" xsi:type="string">public_key</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\PublicKey</item>
                </item>
                <item name="predefined" xsi:type="array">
                    <item name="type" xsi:type="string">predefined</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Predefined</item>
                </item>
                <item name="states" xsi:type="array">
                    <item name="type" xsi:type="string">states</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\States</item>
                </item>
                <item name="buckaroo_fee" xsi:type="array">
                    <item name="type" xsi:type="string">buckaroo_fee</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\BuckarooFee</item>
                </item>
                <item name="allowed_currencies" xsi:type="array">
                    <item name="type" xsi:type="string">allowed_currencies</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\AllowedCurrencies</item>
                </item>
                <item name="refund" xsi:type="array">
                    <item name="type" xsi:type="string">refund</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Model\ConfigProvider\Refund</item>
                </item>
            </argument>
        </arguments>
    </type>

    <type name="Buckaroo\Magento2\Logging\InternalLogger">
        <arguments>
            <argument name="name" xsi:type="string">buckaroo_logging</argument>
            <argument name="handlers"  xsi:type="array">
                <item name="exception" xsi:type="object">Buckaroo\Magento2\Logging\CriticalHandler</item>
                <item name="debug" xsi:type="object">Buckaroo\Magento2\Logging\DebugHandler</item>
            </argument>
        </arguments>
    </type>

    <type name="Buckaroo\Magento2\Block\Adminhtml\Sales\Order\Creditmemo\Create\BankFields">
        <arguments>
            <argument name="refundFieldsFactory" xsi:type="object">Buckaroo\Magento2\Model\RefundFieldsFactory</argument>
        </arguments>
    </type>

    <type name="Magento\Framework\Webapi\Rest\Request\DeserializerFactory">
        <arguments>
            <argument name="deserializers" xsi:type="array">
                <item name="application_x-www-form-urlencoded" xsi:type="array">
                    <item name="type" xsi:type="string">application/x-www-form-urlencoded</item>
                    <item name="model" xsi:type="string">Buckaroo\Magento2\Webapi\Rest\Request\Deserializer\XWwwFormUrlencoded</item>
                </item>
                <item name="application_json" xsi:type="array">
                    <item name="type" xsi:type="string">application/json</item>
                    <item name="model" xsi:type="string">Magento\Framework\Webapi\Rest\Request\Deserializer\Json</item>
                </item>
                <item name="application_xml" xsi:type="array">
                    <item name="type" xsi:type="string">application/xml</item>
                    <item name="model" xsi:type="string">Magento\Framework\Webapi\Rest\Request\Deserializer\Xml</item>
                </item>
                <item name="application_xhtml_xml" xsi:type="array">
                    <item name="type" xsi:type="string">application/xhtml+xml</item>
                    <item name="model" xsi:type="string">Magento\Framework\Webapi\Rest\Request\Deserializer\Xml</item>
                </item>
                <item name="text_xml" xsi:type="array">
                    <item name="type" xsi:type="string">text/xml</item>
                    <item name="model" xsi:type="string">Magento\Framework\Webapi\Rest\Request\Deserializer\Xml</item>
                </item>
            </argument>
        </arguments>
    </type>

    <type name="Buckaroo\Magento2\Model\RefundFieldsFactory">
    </type>

    <type name="Magento\Quote\Model\Cart\CartTotalRepository">
        <plugin name="buckaroo_magento2_fee_total" type="Buckaroo\Magento2\Plugin\CartTotalRepository" />
    </type>

    <type name="Magento\Quote\Model\Quote\TotalsCollector">
        <plugin name="buckaroo_magento2_fee_total_collector" type="Buckaroo\Magento2\Plugin\TotalsCollector" />
    </type>

    <type name="Magento\Quote\Model\Cart\TotalsConverter">
        <plugin name="buckaroo_magento2_fee_total_converter" type="Buckaroo\Magento2\Plugin\TotalsConverter" />
    </type>

    <type name="Buckaroo\Magento2\Block\Info\Creditcard">
        <arguments>
            <argument name="configProvider" xsi:type="object">Buckaroo\Magento2\Model\ConfigProvider\Method\Creditcard</argument>
        </arguments>
    </type>

    <type name="Buckaroo\Magento2\Model\ConfigProvider\CompositeConfigProvider">
        <arguments>
            <argument name="configProviders" xsi:type="array">
                <item name="buckaroo_magento2_configprovider_account" xsi:type="object">Buckaroo\Magento2\Model\ConfigProvider\Account</item>
                <item name="buckaroo_magento2_configprovider_buckaroofee" xsi:type="object">Buckaroo\Magento2\Model\ConfigProvider\BuckarooFee</item>
                <item name="buckaroo_magento2_configprovider_predefined" xsi:type="object">Buckaroo\Magento2\Model\ConfigProvider\Predefined</item>
                <item name="buckaroo_magento2_configprovider_privatekey" xsi:type="object">Buckaroo\Magento2\Model\ConfigProvider\Privatekey</item>
                <item name="buckaroo_magento2_configprovider_publickey" xsi:type="object">Buckaroo\Magento2\Model\ConfigProvider\Publickey</item>
                <item name="buckaroo_magento2_configprovider_refund" xsi:type="object">Buckaroo\Magento2\Model\ConfigProvider\Refund</item>
                <item name="buckaroo_magento2_configprovider_states" xsi:type="object">Buckaroo\Magento2\Model\ConfigProvider\States</item>
            </argument>
        </arguments>
    </type>

    <type name="Buckaroo\Magento2\Gateway\Http\TransactionBuilder\AbstractTransactionBuilder">
        <arguments>
            <argument name="urlBuilder" xsi:type="object">Magento\Framework\Url</argument>
        </arguments>
    </type>

    <type name="Magento\Framework\View\Asset\Minification">
        <plugin name="my-exclude" type="Buckaroo\Magento2\Plugin\ExcludeFilesFromMinification" />
    </type>

    <type name="MyParcelNL\Magento\Model\Checkout\ShippingMethods">
        <plugin name="myParcelNLBuckarooPlugin" type="Buckaroo\Magento2\Plugin\MyParcelNLBuckarooPlugin" />
    </type>

    <type name="Magento\CatalogInventory\Model\Configuration">
        <plugin name="buckarooCatalogInventoryConfiguration" type="Buckaroo\Magento2\Plugin\CatalogInventory\Model\Configuration" />
    </type>

    <type name="Magento\Checkout\Api\PaymentInformationManagementInterface">
        <plugin name="buckarooPaymentInformationManagement" type="Buckaroo\Magento2\Plugin\PaymentMethodManagement"/>
    </type>

    <type name="Magento\Checkout\Api\GuestPaymentInformationManagementInterface">
        <plugin name="buckarooGuestPaymentInformationManagement" type="Buckaroo\Magento2\Plugin\GuestPaymentMethodManagement"/>
    </type>

    <type name="Magento\Framework\Console\CommandListInterface">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="buckaroo_pushsend" xsi:type="object">Buckaroo\Magento2\Console\Command\PushSend\Proxy</item>
            </argument>
        </arguments>
    </type>

    <type name="Magento\Payment\Model\MethodList">
        <arguments>
            <argument name="additionalChecks" xsi:type="array">
                <item name="ip" xsi:type="string">ip</item>
            </argument>
        </arguments>
    </type>

    <type name="Magento\Payment\Model\Checks\SpecificationFactory">
        <arguments>
            <argument name="mapping" xsi:type="array">
                <item name="ip" xsi:type="object">Buckaroo\Magento2\Model\Checks\CanUseForIP</item>
            </argument>
        </arguments>
    </type>

    <!-- iDEAL Buckaroo using Payment Provider Gateway -->
    <virtualType name="IdealPaymentGatewayFacade" type="Buckaroo\Magento2\Model\Method\BuckarooAdapter">
        <arguments>
            <argument name="code" xsi:type="const">Buckaroo\Magento2\Model\ConfigProvider\Method\IdealGateway::CODE</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Buckaroo\Magento2\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">IdealPaymentGatewayValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">IdealValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">IdealPaymentGatewayCommandPool</argument>
            <argument name="usesRedirect" xsi:type="boolean">true</argument>
        </arguments>
    </virtualType>

    <!-- iDEAL Buckaroo Gateway Payment Provider valueHandlerPool -->
    <virtualType name="IdealPaymentGatewayValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">IdealPaymentGatewayConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="IdealPaymentGatewayConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">IdealPaymentGatewayConfig</argument>
        </arguments>
    </virtualType>

    <!-- Configuration reader -->
    <virtualType name="IdealPaymentGatewayConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Buckaroo\Magento2\Model\ConfigProvider\Method\IdealGateway::CODE
            </argument>
        </arguments>
    </virtualType>

    <!-- iDEAL Buckaroo Gateway Payment Provider validatorPool -->
    <virtualType name="IdealValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">BuckarooCountryValidator</item>
                <item name="global" xsi:type="string">Buckaroo\Magento2\Gateway\Validator\IssuerValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Buckaroo\Magento2\Gateway\Validator\IssuerValidator">
        <arguments>
            <argument name="config" xsi:type="object">Buckaroo\Magento2\Model\ConfigProvider\Method\IdealGateway</argument>
            <argument name="helper" xsi:type="object">Buckaroo\Magento2\Helper\Data</argument>
            <argument name="request" xsi:type="object">Magento\Framework\App\RequestInterface</argument>
        </arguments>
    </type>

    <virtualType name="BuckarooCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">IdealPaymentGatewayConfig</argument>
        </arguments>
    </virtualType>

    <!-- iDEAL Buckaroo Gateway Payment Provider commandPool -->
    <virtualType name="IdealPaymentGatewayCommandPool" type="Magento\Payment\Gateway\Command\CommandPool">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="order" xsi:type="string">IdealOrderCommand</item>
                <item name="refund" xsi:type="string">IdealRefundCommand</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="IdealOrderCommand" type="Magento\Payment\Gateway\Command\GatewayCommand">
        <arguments>
            <argument name="requestBuilder" xsi:type="object">IdealSdkOrderRequest</argument>
            <argument name="transferFactory" xsi:type="object">Buckaroo\Magento2\Gateway\Http\SDKTransferFactory</argument>
            <argument name="client" xsi:type="object">Buckaroo\Magento2\Gateway\Http\Client\TransactionPay</argument>
            <argument name="handler" xsi:type="object">IdealAuthorizationHandler</argument>
            <argument name="validator" xsi:type="object">Buckaroo\Magento2\Gateway\Validator\ResponseCodeSDKValidator</argument>
        </arguments>
    </virtualType>

    <virtualType name="IdealRefundCommand" type="Magento\Payment\Gateway\Command\GatewayCommand">
        <arguments>
            <argument name="requestBuilder" xsi:type="object">IdealSdkRefundRequest</argument>
            <argument name="transferFactory" xsi:type="object">Buckaroo\Magento2\Gateway\Http\SDKTransferFactory</argument>
            <argument name="client" xsi:type="object">Buckaroo\Magento2\Gateway\Http\Client\TransactionRefund</argument>
            <argument name="handler" xsi:type="object">IdealRefundHandler</argument>
            <argument name="validator" xsi:type="object">Buckaroo\Magento2\Gateway\Validator\ResponseCodeSDKValidator</argument>
        </arguments>
    </virtualType>

    <virtualType name="IdealOrderRequest" type="Magento\Payment\Gateway\Request\BuilderComposite">
        <arguments>
            <argument name="builders" xsi:type="array">
                <item name="order" xsi:type="string">Buckaroo\Magento2\Gateway\Request\OrderDataBuilder</item>
                <item name="services" xsi:type="string">Buckaroo\Magento2\Gateway\Request\ServicesDataBuilder</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="IdealSdkOrderRequest" type="Magento\Payment\Gateway\Request\BuilderComposite">
        <arguments>
            <argument name="builders" xsi:type="array">
                <item name="method" xsi:type="string">Buckaroo\Magento2\Gateway\Request\PaymentMethodDataBuilder</item>
                <item name="amount_debit" xsi:type="string">Buckaroo\Magento2\Gateway\Request\AmountDebitDataBuilder</item>
                <item name="issuer" xsi:type="string">Buckaroo\Magento2\Gateway\Request\IssuerDataBuilder</item>
                <item name="return_url" xsi:type="string">Buckaroo\Magento2\Gateway\Request\ReturnUrlDataBuilder</item>
                <item name="invoice" xsi:type="string">Buckaroo\Magento2\Gateway\Request\InvoiceDataBuilder</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="IdealSdkRefundRequest" type="Magento\Payment\Gateway\Request\BuilderComposite">
        <arguments>
            <argument name="builders" xsi:type="array">
                <item name="method" xsi:type="string">Buckaroo\Magento2\Gateway\Request\PaymentMethodDataBuilder</item>
                <item name="invoice" xsi:type="string">Buckaroo\Magento2\Gateway\Request\InvoiceDataBuilder</item>
                <item name="original_transaction_key" xsi:type="string">Buckaroo\Magento2\Gateway\Request\OriginalTransactionKeyDataBuilder</item>
                <item name="amount_credit" xsi:type="string">Buckaroo\Magento2\Gateway\Request\AmountCreditDataBuilder</item>
                <item name="return_url" xsi:type="string">Buckaroo\Magento2\Gateway\Request\AmountCreditDataBuilder</item>
            </argument>
        </arguments>
    </virtualType>

    <!-- Response handlers -->
    <virtualType name="IdealAuthorizationHandler"  type="Magento\Payment\Gateway\Response\HandlerChain">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="txnid" xsi:type="string">Buckaroo\Magento2\Gateway\Response\TxnIdHandler</item>
                <item name="fraud" xsi:type="string">Buckaroo\Magento2\Gateway\Response\FraudHandler</item>
                <item name="response" xsi:type="string">Buckaroo\Magento2\Gateway\Response\ResponseHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <!-- Response handlers -->
    <virtualType name="IdealRefundHandler"  type="Magento\Payment\Gateway\Response\HandlerChain">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="txnid" xsi:type="string">Buckaroo\Magento2\Gateway\Response\TxnIdHandler</item>
                <item name="fraud" xsi:type="string">Buckaroo\Magento2\Gateway\Response\FraudHandler</item>
                <item name="response" xsi:type="string">Buckaroo\Magento2\Gateway\Response\RefundHandler</item>
            </argument>
        </arguments>
    </virtualType>
    <!-- iDEAL Buckaroo using Payment Provider Gateway -->
</config>
